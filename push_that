#!/usr/bin/bash

echo "===Config==="
git config --global --add safe.directory $PWD
echo "===git Add==="
STATUS=($(git status -s))
COMMIT=""
for (( c=0; c<${#STATUS[@]}; c+=2 ))
do
    if [[ ${STATUS[$c]} = "??" || ${STATUS[$c]} == *"M"* ||  ${STATUS[$c]} = *"ai"* ]]
    then
        git add ${STATUS[$c + 1]}
        if [[ ${STATUS[$c]} = "??" || ${STATUS[$c]} = *"ai"* ]]
        then
            TMP="[ADD]"
        else
            TMP="[MOD]"
        fi
        COMMIT+=$TMP" "${STATUS[$c + 1]}", "
    fi
done
echo "===Commiting==="
git commit -m "$COMMIT"
echo "===Pushing==="
git push